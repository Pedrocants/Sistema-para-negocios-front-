{"ast":null,"code":"var _jsxFileName = \"/home/pedro/Descargas/Chepps.proyect/CheppsFront-end/chepps-company/src/components/modalOrdenes.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Modal from 'react-modal';\nimport styled from 'styled-components';\nimport { obtenerDatos } from '../helper/traeDatos';\nimport { convertirFechaConZonaHoraria } from '../helper/definirFecha';\nimport { ProductoDetalle } from './ProductoDetalle';\nimport Contacto from '../prototype/Contacto';\nimport Orden from '../prototype/Orden';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Select = styled.select`\n  width: 87%;\n  padding: 10px;\n  margin-bottom: 10px;\n  margin-right: 10px;\n  margin-left: 10px;\n  background-color: #555; /* Fondo gris para los campos */\n  color: #fff;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  outline: none;\n\n  &::placeholder {\n    color: #ccc;\n  }\n`;\n_c = Select;\nconst ModalContent = styled.div`\n  background: #333;\n  padding: 20px;\n  border-radius: 8px;\n  color: #fff;\n  max-width: 500px;\n  width: 100%;\n  height: auto;\n  margin: 0 auto;\n  overflow: hidden;\n`;\n_c2 = ModalContent;\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  align-items: center;\n`;\n_c3 = Form;\nconst Label = styled.label`\n  width: 100%;\n  color: #bbb;\n  font-size: 14px;\n`;\n_c4 = Label;\nconst Input = styled.input`\n  width: 100%;\n  padding: 10px;\n  background-color: #555;\n  color: #fff;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  outline: none;\n\n  &::placeholder {\n    color: #ccc;\n  }\n`;\n_c5 = Input;\nconst Button = styled.button`\n  background-color: #e0a800;\n  color: #000;\n  border: none;\n  padding: 10px 20px;\n  font-size: 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 10px;\n\n  &:hover {\n    background-color: #ffd700;\n  }\n`;\n_c6 = Button;\nconst ModalOrdenes = ({\n  isModalOpen,\n  toggleModal,\n  openConfirmationModal,\n  userId,\n  token\n}) => {\n  _s();\n  const [sumaTotal, setSumaTotal] = useState(0);\n  const [productos, setProductos] = useState(null);\n  const [insumos, setInsumos] = useState([]);\n  const [clientes, setClientes] = useState([]);\n  const [detalles, setDetalles] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [pagado, setPagado] = useState(null);\n  const [tipo, setTipo] = useState(null);\n  const [total, setTotal] = useState(0);\n  const [ordenDetalle, setOrdenDetalle] = useState([]);\n  //console.log(userId);\n  const [tipoPago, setTipoPago] = useState('EFECTIVO');\n  const handleSelectChange = e => {\n    const selectedItemid = parseInt(e.target.value, 10);\n    const item = clientes.find(item => item.idCliente === selectedItemid);\n    setSelectedItem(item);\n  };\n  useEffect(() => {\n    const cargarProductosYClientes = async () => {\n      try {\n        const url = \"http://localhost:8080/public/productos\";\n        const urlClientes = \"http://localhost:8080/public/clientes\";\n        const urlInsumos = \"http://localhost:8080/public/insumo/retornarTodos\";\n        const dataProductos = await obtenerDatos(url, 'GET', token);\n        const dataClientes = await obtenerDatos(urlClientes, 'GET', token);\n        const dataInsumo = await obtenerDatos(urlInsumos, 'GET', token);\n        setProductos(dataProductos);\n        setClientes(dataClientes);\n        setInsumos(dataInsumo);\n      } catch (error) {\n        console.error('Error al cargar los productos:', error);\n      }\n    };\n    cargarProductosYClientes();\n  }, [!productos]);\n\n  // FunciÃ³n para agregar un nuevo ProductoDetalle\n  const handleAgregarDetalle = () => {\n    if (productos.length > 0) {\n      // Generamos un identificador Ãºnico para cada detalle\n      const nuevoDetalle = {\n        id: Date.now(),\n        // ID Ãºnico\n        productos,\n        insumos,\n        suma: 0 // Inicializamos la suma en 0\n      };\n      setDetalles([...detalles, nuevoDetalle]);\n    } else {\n      console.warn('Productos no disponibles para agregar.');\n    }\n  };\n\n  // FunciÃ³n para quitar el Ãºltimo ProductoDetalle\n  const handleQuitarDetalle = () => {\n    if (detalles.length > 0) {\n      // Eliminar el Ãºltimo detalle y restar su suma del total\n      const ultimoDetalle = detalles[detalles.length - 1];\n      console.log(ultimoDetalle);\n      const ultimaOrdenDetalle = ordenDetalle[detalles.length - 1];\n      const descuento = ultimaOrdenDetalle && ultimaOrdenDetalle.descuentosPorProducto ? parseFloat(ultimaOrdenDetalle.descuentosPorProducto) : 0;\n      const nuevaSuma = parseFloat(ultimoDetalle.suma) - descuento;\n      console.log(nuevaSuma);\n      //console.log(ultimoDetalle);\n      //console.log(descuento);\n      //console.log(ultimaOrdenDetalle);\n\n      setSumaTotal(prevSumaTotal => (prevSumaTotal - ultimoDetalle.suma).toFixed(2));\n      setTotal(prevTotal => prevTotal - nuevaSuma);\n      setDetalles(prevDetalles => prevDetalles.slice(0, -1));\n      if (ordenDetalle.length === detalles.length) {\n        setOrdenDetalle(prevOrdenDetalle => prevOrdenDetalle.slice(0, -1));\n      }\n    }\n  };\n  const actualizarSumaDetalle = (id, nuevaSuma) => {\n    setDetalles(prevDetalles => {\n      // Actualizamos el detalle especÃ­fico\n      const nuevosDetalles = prevDetalles.map(detalle => detalle.id === id ? {\n        ...detalle,\n        suma: nuevaSuma\n      } : detalle);\n\n      // Recalculamos la suma total usando los nuevos detalles\n      const nuevaSumaTotal = nuevosDetalles.reduce((total, detalle) => total + detalle.suma, 0);\n\n      // Actualizamos la suma total\n      setSumaTotal(nuevaSumaTotal);\n      return nuevosDetalles; // Retornamos el nuevo estado de los detalles\n    });\n  };\n  const enviarDatos = event => {\n    event.preventDefault(); // Previene la recarga del formulario\n\n    if (!selectedItem) {\n      alert('Seleccione un cliente antes de guardar.');\n      return;\n    }\n    if (!sumaTotal) {\n      alert('Total de orden no puede ser 0');\n      return;\n    }\n    if (detalles.length === 0) {\n      alert('Agregue al menos un detalle.');\n      return;\n    }\n    if (!pagado) {\n      alert('Pagado debe contener un valor');\n      return;\n    }\n    if (!tipo) {\n      alert('Seleccione un tipo de orden');\n      return;\n    }\n\n    // Capturar valores del formulario\n    const form = event.target;\n    const direccion = form.calle.value;\n    const provincia = form.provincia.value;\n    const telefono = form.telefono.value;\n    const email = form.email.value;\n    const fecha_entrega = form.fecha.value ? form.fecha.value : convertirFechaConZonaHoraria(new Date());\n    const contacto = new Contacto({\n      idContacto: null,\n      telefono: telefono,\n      email: email\n    });\n    const orden = new Orden({\n      cliente: selectedItem,\n      contacto: contacto,\n      domicilio: {\n        direccion,\n        provincia\n      },\n      usuario: {\n        idUsuario: userId\n      },\n      detalle: ordenDetalle,\n      fecha_entrega,\n      subTotal: sumaTotal,\n      total: total,\n      pagado,\n      tipoOrden: tipo,\n      tipoPago: tipoPago\n    });\n    const ordenRespuesta = cargarOrden(orden);\n    if (ordenRespuesta) {\n      form.provincia.value = \"\";\n      form.telefono.value = \"\";\n      form.calle.value = \"\";\n      form.email.value = \"\";\n      form.fecha.value = \"\";\n      setSumaTotal(() => 0);\n      setPagado(() => 0);\n      setTotal(() => 0);\n      setTipo(() => null);\n      setDetalles(() => []);\n      toggleModal();\n      openConfirmationModal();\n    } else {\n      alert(\"Ha ocurrido un error!\");\n    }\n  };\n  async function cargarOrden(orden) {\n    const url = 'http://localhost:8080/public/orden/guardar';\n    const data = await obtenerDatos(url, 'POST', orden);\n    return data;\n  }\n  function calcularDescuentos() {\n    let descuentosPorProducto = 0;\n    if (ordenDetalle.length > 0) {\n      for (let i = 0; i < ordenDetalle.length; i++) {\n        if (ordenDetalle[i].descuentosPorProducto > 0 && ordenDetalle[i].descuentosPorProducto <= sumaTotal) {\n          descuentosPorProducto += parseFloat(ordenDetalle[i].descuentosPorProducto);\n        }\n      }\n      descuentosPorProducto = sumaTotal - descuentosPorProducto;\n      setTotal(() => descuentosPorProducto);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isModalOpen,\n    onRequestClose: toggleModal,\n    contentLabel: \"Formulario de Nueva Orden\",\n    style: {\n      overlay: {\n        background: \"linear-gradient(135deg, #0a192f, #1f4068)\" // ðŸ”¹ Azul oscuro con degradado\n      },\n      content: {\n        width: \"50%\",\n        margin: \"auto\",\n        padding: \"20px\",\n        borderRadius: \"8px\",\n        background: \"black\",\n        border: \"none\"\n      }\n    },\n    children: /*#__PURE__*/_jsxDEV(ModalContent, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: \"Nueva Orden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: enviarDatos,\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"Cliente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: handleSelectChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Seleccione uno...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), clientes.map(cliente => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cliente.idCliente,\n            children: [cliente.nombre, \"  \", cliente.apellido ? cliente.apellido : '']\n          }, cliente.idCliente, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Domicilio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"calle\",\n            defaultValue: \"Domicilio generico.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Provincia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"provincia\",\n            defaultValue: \"Mendoza\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Contacto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Telefono:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"tel\",\n            name: \"telefono\",\n            defaultValue: \"261\",\n            maxLength: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Label, {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"email\",\n            name: \"email\",\n            defaultValue: \"alguien@example.com\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), detalles.map(detalle => /*#__PURE__*/_jsxDEV(ProductoDetalle, {\n          cont: detalles.length,\n          contOrdenesDetalle: ordenDetalle.length,\n          productos: detalle.productos,\n          insumos: detalle.insumos,\n          onActualizarSumaTotal: nuevaSuma => actualizarSumaDetalle(detalle.id, nuevaSuma),\n          setOrdenDetalle: setOrdenDetalle,\n          calcularDescuentos: calcularDescuentos\n        }, detalle.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          onClick: handleAgregarDetalle,\n          children: \"Agregar l\\xEDnea de producto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          onClick: handleQuitarDetalle,\n          disabled: detalles.length === 0,\n          children: \"Quitar \\xDAltimo Detalle del Producto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"Fecha de Entrega:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"datetime-local\",\n          name: \"fecha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"Tipo: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: event => setTipo(event.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: null,\n            children: \"Seleccione uno...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 'PAGO',\n            children: \"PAGO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 'COMPRA',\n            children: \"COMPRA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 'VENTA',\n            children: \"VENTA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"Pagado:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"number\",\n          placeholder: \"9.99\",\n          onChange: event => setPagado(parseFloat(event.target.value))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: \"tipo de pago:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: event => setTipoPago(event.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: 'EFECTIVO',\n            children: \"Efectivo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 'TRANSFERENCIA',\n            children: \"Transferencia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 'VILLETERAS VIRTUALES (QR, LINK, ETC.)',\n            children: \"VILLETERAS VIRTUALES (QR, LINK, ETC.)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: 'OTRO (cheques, pagarÃ©, cuenta corriente, etc.)',\n            children: \"OTRO (cheques, pagar\\xE9, cuenta corriente, etc.)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: [\"subTotal: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"$\", sumaTotal]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Total Orden: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"$\", total]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Enviar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          onClick: toggleModal,\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 5\n  }, this);\n};\n_s(ModalOrdenes, \"/FW6tAklgo9fcwIqRVyU2msSxMY=\");\n_c7 = ModalOrdenes;\nexport default ModalOrdenes;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Select\");\n$RefreshReg$(_c2, \"ModalContent\");\n$RefreshReg$(_c3, \"Form\");\n$RefreshReg$(_c4, \"Label\");\n$RefreshReg$(_c5, \"Input\");\n$RefreshReg$(_c6, \"Button\");\n$RefreshReg$(_c7, \"ModalOrdenes\");","map":{"version":3,"names":["React","useState","useEffect","Modal","styled","obtenerDatos","convertirFechaConZonaHoraria","ProductoDetalle","Contacto","Orden","jsxDEV","_jsxDEV","Select","select","_c","ModalContent","div","_c2","Form","form","_c3","Label","label","_c4","Input","input","_c5","Button","button","_c6","ModalOrdenes","isModalOpen","toggleModal","openConfirmationModal","userId","token","_s","sumaTotal","setSumaTotal","productos","setProductos","insumos","setInsumos","clientes","setClientes","detalles","setDetalles","selectedItem","setSelectedItem","pagado","setPagado","tipo","setTipo","total","setTotal","ordenDetalle","setOrdenDetalle","tipoPago","setTipoPago","handleSelectChange","e","selectedItemid","parseInt","target","value","item","find","idCliente","cargarProductosYClientes","url","urlClientes","urlInsumos","dataProductos","dataClientes","dataInsumo","error","console","handleAgregarDetalle","length","nuevoDetalle","id","Date","now","suma","warn","handleQuitarDetalle","ultimoDetalle","log","ultimaOrdenDetalle","descuento","descuentosPorProducto","parseFloat","nuevaSuma","prevSumaTotal","toFixed","prevTotal","prevDetalles","slice","prevOrdenDetalle","actualizarSumaDetalle","nuevosDetalles","map","detalle","nuevaSumaTotal","reduce","enviarDatos","event","preventDefault","alert","direccion","calle","provincia","telefono","email","fecha_entrega","fecha","contacto","idContacto","orden","cliente","domicilio","usuario","idUsuario","subTotal","tipoOrden","ordenRespuesta","cargarOrden","data","calcularDescuentos","i","isOpen","onRequestClose","contentLabel","style","overlay","background","content","width","margin","padding","borderRadius","border","children","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","nombre","apellido","type","name","defaultValue","maxLength","cont","contOrdenesDetalle","onActualizarSumaTotal","onClick","disabled","placeholder","_c7","$RefreshReg$"],"sources":["/home/pedro/Descargas/Chepps.proyect/CheppsFront-end/chepps-company/src/components/modalOrdenes.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Modal from 'react-modal';\nimport styled from 'styled-components';\nimport { obtenerDatos } from '../helper/traeDatos';\nimport { convertirFechaConZonaHoraria } from '../helper/definirFecha';\nimport { ProductoDetalle } from './ProductoDetalle';\nimport Contacto from '../prototype/Contacto';\nimport Orden from '../prototype/Orden';\n\nconst Select = styled.select`\n  width: 87%;\n  padding: 10px;\n  margin-bottom: 10px;\n  margin-right: 10px;\n  margin-left: 10px;\n  background-color: #555; /* Fondo gris para los campos */\n  color: #fff;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  outline: none;\n\n  &::placeholder {\n    color: #ccc;\n  }\n`;\nconst ModalContent = styled.div`\n  background: #333;\n  padding: 20px;\n  border-radius: 8px;\n  color: #fff;\n  max-width: 500px;\n  width: 100%;\n  height: auto;\n  margin: 0 auto;\n  overflow: hidden;\n`;\n\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  align-items: center;\n`;\n\nconst Label = styled.label`\n  width: 100%;\n  color: #bbb;\n  font-size: 14px;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 10px;\n  background-color: #555;\n  color: #fff;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  outline: none;\n\n  &::placeholder {\n    color: #ccc;\n  }\n`;\n\nconst Button = styled.button`\n  background-color: #e0a800;\n  color: #000;\n  border: none;\n  padding: 10px 20px;\n  font-size: 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 10px;\n\n  &:hover {\n    background-color: #ffd700;\n  }\n`;\n\nconst ModalOrdenes = ({ isModalOpen, toggleModal, openConfirmationModal, userId, token }) => {\n\n  const [sumaTotal, setSumaTotal] = useState(0);\n  const [productos, setProductos] = useState(null);\n  const [insumos, setInsumos] = useState([]);\n  const [clientes, setClientes] = useState([]);\n  const [detalles, setDetalles] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [pagado, setPagado] = useState(null);\n  const [tipo, setTipo] = useState(null);\n  const [total, setTotal] = useState(0);\n  const [ordenDetalle, setOrdenDetalle] = useState([]);\n  //console.log(userId);\n  const [tipoPago, setTipoPago] = useState('EFECTIVO');\n\n  const handleSelectChange = (e) => {\n    const selectedItemid = parseInt(e.target.value, 10);\n    const item = clientes.find((item) => item.idCliente === selectedItemid);\n    setSelectedItem(item);\n\n  };\n\n\n  useEffect(() => {\n    const cargarProductosYClientes = async () => {\n      try {\n        const url = \"http://localhost:8080/public/productos\";\n        const urlClientes = \"http://localhost:8080/public/clientes\";\n\n        const urlInsumos = \"http://localhost:8080/public/insumo/retornarTodos\";\n\n        const dataProductos = await obtenerDatos(url, 'GET', token);\n        const dataClientes = await obtenerDatos(urlClientes, 'GET', token);\n        const dataInsumo = await obtenerDatos(urlInsumos, 'GET', token);\n        setProductos(dataProductos);\n        setClientes(dataClientes);\n        setInsumos(dataInsumo);\n      } catch (error) {\n        console.error('Error al cargar los productos:', error);\n      }\n    };\n\n    cargarProductosYClientes();\n  }, [!productos]);\n\n  // FunciÃ³n para agregar un nuevo ProductoDetalle\n  const handleAgregarDetalle = () => {\n    if (productos.length > 0) {\n      // Generamos un identificador Ãºnico para cada detalle\n      const nuevoDetalle = {\n        id: Date.now(), // ID Ãºnico\n        productos,\n        insumos,\n        suma: 0, // Inicializamos la suma en 0\n      };\n      setDetalles([...detalles, nuevoDetalle]);\n    } else {\n      console.warn('Productos no disponibles para agregar.');\n    }\n  };\n\n  // FunciÃ³n para quitar el Ãºltimo ProductoDetalle\n  const handleQuitarDetalle = () => {\n    if (detalles.length > 0) {\n      // Eliminar el Ãºltimo detalle y restar su suma del total\n      const ultimoDetalle = detalles[detalles.length - 1];\n      console.log(ultimoDetalle);\n      const ultimaOrdenDetalle = ordenDetalle[detalles.length - 1];\n      const descuento = (ultimaOrdenDetalle && ultimaOrdenDetalle.descuentosPorProducto) ? parseFloat(ultimaOrdenDetalle.descuentosPorProducto) : 0;\n      const nuevaSuma = parseFloat(ultimoDetalle.suma) - descuento;\n      console.log(nuevaSuma);\n      //console.log(ultimoDetalle);\n      //console.log(descuento);\n      //console.log(ultimaOrdenDetalle);\n\n      setSumaTotal((prevSumaTotal) => (prevSumaTotal - ultimoDetalle.suma).toFixed(2));\n      setTotal((prevTotal) => prevTotal - nuevaSuma);\n      setDetalles((prevDetalles) => prevDetalles.slice(0, -1));\n      if (ordenDetalle.length === detalles.length) {\n        setOrdenDetalle((prevOrdenDetalle) => prevOrdenDetalle.slice(0, -1));\n      }\n    }\n  };\n\n  const actualizarSumaDetalle = (id, nuevaSuma) => {\n    setDetalles((prevDetalles) => {\n      // Actualizamos el detalle especÃ­fico\n      const nuevosDetalles = prevDetalles.map((detalle) =>\n        detalle.id === id ?\n          { ...detalle, suma: nuevaSuma } :\n          detalle\n      );\n\n      // Recalculamos la suma total usando los nuevos detalles\n      const nuevaSumaTotal = nuevosDetalles.reduce(\n        (total, detalle) => total + detalle.suma,\n        0\n      );\n\n      // Actualizamos la suma total\n      setSumaTotal(nuevaSumaTotal);\n\n      return nuevosDetalles; // Retornamos el nuevo estado de los detalles\n    });\n  };\n\n  const enviarDatos = (event) => {\n    event.preventDefault(); // Previene la recarga del formulario\n\n    if (!selectedItem) {\n      alert('Seleccione un cliente antes de guardar.');\n      return;\n    }\n    if (!sumaTotal) {\n      alert('Total de orden no puede ser 0');\n      return;\n    }\n    if (detalles.length === 0) {\n      alert('Agregue al menos un detalle.');\n      return;\n    }\n    if (!pagado) {\n      alert('Pagado debe contener un valor');\n      return;\n    }\n    if (!tipo) {\n      alert('Seleccione un tipo de orden');\n      return;\n    }\n\n    // Capturar valores del formulario\n    const form = event.target;\n    const direccion = form.calle.value;\n    const provincia = form.provincia.value;\n    const telefono = form.telefono.value;\n    const email = form.email.value;\n    const fecha_entrega = (form.fecha.value) ? form.fecha.value : convertirFechaConZonaHoraria(new Date());\n\n    const contacto = new Contacto({\n      idContacto: null,\n      telefono: telefono,\n      email: email\n    });\n\n    const orden = new Orden({\n      cliente: selectedItem,\n      contacto: contacto,\n      domicilio: { direccion, provincia },\n      usuario: { idUsuario: userId },\n      detalle: ordenDetalle,\n      fecha_entrega,\n      subTotal: sumaTotal,\n      total: total,\n      pagado,\n      tipoOrden: tipo,\n      tipoPago: tipoPago\n    });\n    const ordenRespuesta = cargarOrden(orden);\n\n    if (ordenRespuesta) {\n      form.provincia.value = \"\";\n      form.telefono.value = \"\";\n      form.calle.value = \"\";\n      form.email.value = \"\";\n      form.fecha.value = \"\";\n      setSumaTotal(() => 0);\n      setPagado(() => 0);\n      setTotal(() => 0);\n      setTipo(() => null);\n      setDetalles(() => []);\n\n      toggleModal();\n      openConfirmationModal();\n\n    } else {\n      alert(\"Ha ocurrido un error!\");\n    }\n  };\n\n  async function cargarOrden(orden) {\n    const url = 'http://localhost:8080/public/orden/guardar';\n\n    const data = await obtenerDatos(url, 'POST', orden);\n    return data;\n\n  }\n\n\n  function calcularDescuentos() {\n\n    let descuentosPorProducto = 0;\n\n    if (ordenDetalle.length > 0) {\n\n      for (let i = 0; i < ordenDetalle.length; i++) {\n\n        if (ordenDetalle[i].descuentosPorProducto > 0 && ordenDetalle[i].descuentosPorProducto <= sumaTotal) {\n          descuentosPorProducto += parseFloat(ordenDetalle[i].descuentosPorProducto);\n        }\n      }\n      descuentosPorProducto = sumaTotal - descuentosPorProducto;\n      setTotal(() => descuentosPorProducto);\n    }\n  }\n  return (\n    <Modal isOpen={isModalOpen} onRequestClose={toggleModal} contentLabel=\"Formulario de Nueva Orden\" style={{\n      overlay: {\n        background: \"linear-gradient(135deg, #0a192f, #1f4068)\", // ðŸ”¹ Azul oscuro con degradado\n      },\n      content: {\n        width: \"50%\",\n        margin: \"auto\",\n        padding: \"20px\",\n        borderRadius: \"8px\",\n        background: \"black\",\n        border: \"none\"\n      },\n    }}>\n      <ModalContent>\n        <h2 style={{ textAlign: 'center' }}>Nueva Orden</h2>\n        <Form onSubmit={enviarDatos}>\n          <Label>Cliente</Label>\n          <Select onChange={handleSelectChange}>\n            <option>Seleccione uno...</option>\n            {clientes.map((cliente) => (\n              <option key={cliente.idCliente} value={cliente.idCliente}>{cliente.nombre}  {(cliente.apellido) ? cliente.apellido : ''}</option>\n            ))}\n          </Select>\n          <div>\n            <Label>Domicilio</Label>\n            <Input type='text' name='calle' defaultValue=\"Domicilio generico.\" />\n            <Label>Provincia</Label>\n            <Input type='text' name='provincia' defaultValue=\"Mendoza\" />\n          </div>\n          <div>\n            <h3><span>Contacto</span></h3>\n            <Label>Telefono:</Label>\n            <Input type='tel' name='telefono' defaultValue=\"261\" maxLength=\"10\" />\n            <Label>Email:</Label>\n            <Input type='email' name='email' defaultValue=\"alguien@example.com\" />\n          </div>\n\n          {\n            detalles.map((detalle) => (\n              <ProductoDetalle\n                key={detalle.id}\n                cont={detalles.length}\n                contOrdenesDetalle={ordenDetalle.length}\n                productos={detalle.productos}\n                insumos={detalle.insumos}\n                onActualizarSumaTotal={(nuevaSuma) => actualizarSumaDetalle(detalle.id, nuevaSuma)}\n                setOrdenDetalle={setOrdenDetalle}\n                calcularDescuentos={calcularDescuentos}\n              />\n            ))\n          }\n          <Button type=\"button\" onClick={handleAgregarDetalle}>\n            Agregar lÃ­nea de producto\n          </Button>\n          <Button type=\"button\" onClick={handleQuitarDetalle} disabled={detalles.length === 0}>\n            Quitar Ãšltimo Detalle del Producto\n          </Button>\n\n          <Label>Fecha de Entrega:</Label>\n          <Input type=\"datetime-local\" name='fecha' />\n          <Label>Tipo: </Label>\n          <Select onChange={(event) => (setTipo(event.target.value))}>\n            <option value={null}>Seleccione uno...</option>\n            <option value={'PAGO'}>PAGO</option>\n            <option value={'COMPRA'}>COMPRA</option>\n            <option value={'VENTA'}>VENTA</option>\n          </Select>\n\n          <Label>Pagado:</Label>\n          <Input type=\"number\" placeholder=\"9.99\" onChange={(event) => (setPagado(parseFloat(event.target.value)))} />\n          <Label>tipo de pago:</Label>\n          <Select onChange={(event) => (setTipoPago(event.target.value))}>\n            <option value={'EFECTIVO'}>Efectivo</option>\n            <option value={'TRANSFERENCIA'}>Transferencia</option>\n            <option value={'VILLETERAS VIRTUALES (QR, LINK, ETC.)'}>VILLETERAS VIRTUALES (QR, LINK, ETC.)</option>\n            <option value={'OTRO (cheques, pagarÃ©, cuenta corriente, etc.)'}>OTRO (cheques, pagarÃ©, cuenta corriente, etc.)</option>\n          </Select>\n\n          <h5>subTotal: <span>${sumaTotal}</span></h5>\n          <h3>Total Orden: <span>${total}</span></h3>\n\n          <Button type=\"submit\">Enviar</Button>\n          <Button type=\"button\" onClick={toggleModal}>Cancelar</Button>\n        </Form>\n      </ModalContent>\n    </Modal>\n  );\n};\n\nexport default ModalOrdenes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}